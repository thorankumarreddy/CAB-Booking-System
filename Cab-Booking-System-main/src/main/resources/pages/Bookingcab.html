<!DOCTYPE html>
<html>
<head>
    <title>Cab Booking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <style>
        .text-white{
            margin-top:20px;
            font-family: "Times New Roman", Times, serif;
        }
    </style>
    </head>
<body>
<section class="vh-100" style="background-color: #9c27b099;">
    <form name="bookingForm" action="/cab-details" method="POST" onsubmit="return validateForm()" >
        <div class="container h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-xl-9">

                    <h1 class="text-white mb-4">Book Your Cab</h1>

                    <div class="card" style="border-radius: 15px;">
                        <div class="card-body">

                            <div class="row align-items-center pt-4 pb-3">
                                <div class="col-md-3 ps-5">

                                    <h6 class="mb-0">Pick Up Location: </h6>
                                </div>

                                <div class="col-md-9 pe-5">
                                    <select name="pickup" required>
                                        <option value="">Select an option</option>
                                        <option value="scdi">SCDI</option>
                                        <option value="library">Library</option>
                                        <option value="cafeteria">Cafeteria</option>
                                        <option value="building201">Building 201</option>
                                        <option value="building203">Building 203</option>
                                    </select>
                                </div>

                            </div>

                            <div class="row align-items-center pt-4 pb-3">

                                <div class="col-md-3 ps-5">
                                    <h6 class="mb-0">Drop Off Location: </h6>
                                </div>

                                <div class="col-md-9 pe-5">
                                    <select name="dropoff" required>
                                        <option value="">Select an option</option>
                                        <option value="scdi">SCDI</option>
                                        <option value="library">Library</option>
                                        <option value="cafeteria">Cafeteria</option>
                                        <option value="building201">Building 201</option>
                                        <option value="building203">Building 203</option>
                                    </select>
                                </div>

                            </div>

                            <hr class="mx-n3">

                            <div class="row align-items-center py-3">
                                <div class="col-md-3 ps-5">

                                    <h6 class="mb-0">Date:</h6>

                                </div>
                                <div class="col-md-9 pe-5">

                                    <input type="date" id="date" name="date" required>


                                </div>
                            </div>



                            <div class="row align-items-center py-3">
                                <div class="col-md-3 ps-5">

                                    <h6 class="mb-0">Time :</h6>

                                </div>
                                <div class="col-md-9 pe-5">

                                    <input type="time" id="time" name="time"required>

                                </div>
                            </div>
                            <hr class="mx-n3">

                            <div class="row align-items-center py-3">
                                <div class="col-md-3 ps-5">

                                    <h6 class="mb-0">Type of cab:</h6>

                                </div>
                                <div class="col-md-9 pe-5">

                                    <select name="cabtype" required>
                                        <option value="">Select an option</option>
                                        <option value="sedan">Sedan</option>
                                        <option value="minivan">MiniVan</option>
                                        <option value="suv">SUV</option>
                                    </select>

                                </div>
                            </div>

                            <hr class="mx-n3">


                            <div class="row align-items-center py-3">
                                <div class="col-md-3 ps-5">

                                    <h6 class="mb-0">Payment Details</h6>

                                </div>


                            <div class="row align-items-center py-3">


                                <div class="col-md-3 ps-5">
                                    <input type="radio" id="creditcard" name="paymentmethod" value="creditcard">
                                    <label for="creditcard">Credit Card</label>
                                </div>

                            </div>
                            <div class="row align-items-center py-3">

                                <div class="col-md-3 ps-5">
                                    <input type="radio" id="cash" name="paymentmethod" value="cash" >
                                    <label for="cash">Cash</label>

                                </div>
                            </div>
                            <div class="row align-items-center py-3" id="cardDetails" name="cardDetails" style="display: none;">
                                <div class="row align-items-center pt-4 pb-3">
                                    <div class="col-md-3 ps-5">

                                        <h6 class="mb-0">Card Number :</h6>

                                    </div>
                                    <div class="col-md-9 pe-5">
                                    <input type="text" id="cardNo" name="cardNo" placeholder="Enter the Card number">
                                    </div>
                                </div>
                                <div class="row align-items-center pt-4 pb-3">
                                    <div class="col-md-3 ps-5">

                                        <h6 class="mb-0">CVV :</h6>

                                    </div>
                                    <div class="col-md-9 pe-5">
                                    <input type="text" id="cvv" name="cvv" placeholder="Enter the cvv">
                                    </div>
                                </div>
                                <div class="row align-items-center pt-4 pb-3">
                                    <div class="col-md-3 ps-5">

                                        <h6 class="mb-0">Expiry Date :</h6>

                                    </div>
                                    <div class="col-md-9 pe-5">
                                    <input type="text" id="expiryDate" name="expiryDate" placeholder="Enter the Expiry date">
                                    </div>
                                </div>
                                <div class="row align-items-center pt-4 pb-3">
                                    <div class="col-md-3 ps-5">

                                        <h6 class="mb-0">Full Name :</h6>
                                    </div>

                                  <div class="col-md-9 pe-5">
                                    <input type="text" id="fullName"  name="fullName" placeholder="Enter the Full Name">
                                </div>
                            </div>


                            </div>
                                <hr class="mx-n3">

                                <div class="px-5 py-4">
                                    <button type="submit" class="btn btn-primary btn-lg">Submit</button>
                                </div>
                        </div>
                    </div>

                </div>
            </div>
            </div>
            </div>
    </form>



</section>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script>
    var creditCardRadio = document.getElementById("creditcard");
    var cashRadio = document.getElementById("cash");
    var cardDetailsDiv = document.getElementById("cardDetails");

    creditCardRadio.addEventListener("change", function() {
        if (creditCardRadio.checked) {
            cardDetailsDiv.style.display = "block";
        } else {
            cardDetailsDiv.style.display = "none";
        }
        cashRadio.checked=false;
    });

    cashRadio.addEventListener("change", function() {

        if (cashRadio.checked) {
            cardDetailsDiv.style.display = "none";
        } else {
            cardDetailsDiv.style.display = "block";
        }
        creditCardRadio.checked=false;
    });

    function validateForm(){
        var givenDate = document.getElementById("date").value;
        var currentDate = new Date();
        var year = currentDate.getFullYear();
        var month = ("0" + (currentDate.getMonth() + 1)).slice(-2); // Adding leading zero if needed
        var day = ("0" + currentDate.getDate()).slice(-2); // Adding leading zero if needed

        var formattedDate = year + "-" + month + "-" + day;

        if (givenDate < formattedDate) {
            alert("The given date is invalid.");
            return false;
        }

        var creditCardRadio = document.getElementById("creditcard");
        if (creditCardRadio.checked) {
            var cardNumber = document.getElementById("cardNo").value;
            var expiryDate = document.getElementById("expiryDate").value;
            var cvv = document.getElementById("cvv").value;

            // Card number validation (Luhn algorithm)
            if (!validateCardNumber(cardNumber)) {
                alert("Invalid card number");
                return false;

            }

            // Expiry date validation
            if (!validateExpiryDate(expiryDate)) {
                alert("Invalid expiry date");
                return false;

            }

            // CVV validation
            if (!validateCVV(cvv)) {
                alert("Invalid CVV");
                return false;

            }

            // All payment details are valid
            alert("Payment details are valid. Processing payment...");

        }

    }
    function validateCardNumber(cardNumber) {
        // Remove any non-digit characters from the card number
        var cleanedCardNumber = cardNumber.replace(/\D/g, '');

        // Perform card number validation using the Luhn algorithm
        var sum = 0;
        var doubleDigit = false;

        for (var i = cleanedCardNumber.length - 1; i >= 0; i--) {
            var digit = parseInt(cleanedCardNumber.charAt(i), 10);

            if (doubleDigit) {
                digit *= 2;
                if (digit > 9) {
                    digit -= 9;
                }
            }

            sum += digit;
            doubleDigit = !doubleDigit;
        }

        return (sum % 10) === 0;
    }
    function validateExpiryDate(expiryDate) {
        // Expiry date should be in the format MM/YY
        var pattern = /^(0[1-9]|1[0-2])\/?([0-9]{2})$/;
        return pattern.test(expiryDate);
    }

    function validateCVV(cvv) {
        // CVV should be a 3 or 4-digit number
        var pattern = /^[0-9]{3,4}$/;
        return pattern.test(cvv);
    }


</script>

</html>
